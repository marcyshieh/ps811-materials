<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Data Manipulation | Introduction to Statistical Computing in Political Science</title>
  <meta name="description" content="This bookdown book contains materials for PS811." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Data Manipulation | Introduction to Statistical Computing in Political Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This bookdown book contains materials for PS811." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Data Manipulation | Introduction to Statistical Computing in Political Science" />
  
  <meta name="twitter:description" content="This bookdown book contains materials for PS811." />
  

<meta name="author" content="Marcy Shieh" />


<meta name="date" content="2021-01-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="base-r-vs-tidyverse.html"/>
<link rel="next" href="graphics.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">POLISCI 811</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="setting-up.html"><a href="setting-up.html"><i class="fa fa-check"></i><b>2</b> Setting Up</a><ul>
<li class="chapter" data-level="2.1" data-path="setting-up.html"><a href="setting-up.html#install-R"><i class="fa fa-check"></i><b>2.1</b> Installing R</a></li>
<li class="chapter" data-level="2.2" data-path="setting-up.html"><a href="setting-up.html#install-Rstudio"><i class="fa fa-check"></i><b>2.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="setting-up.html"><a href="setting-up.html#install-latex"><i class="fa fa-check"></i><b>2.3</b> Installing LaTeX</a></li>
<li class="chapter" data-level="2.4" data-path="setting-up.html"><a href="setting-up.html#knit-RMarkdown"><i class="fa fa-check"></i><b>2.4</b> Knitting R Markdown Files</a></li>
<li class="chapter" data-level="2.5" data-path="setting-up.html"><a href="setting-up.html#create-Github"><i class="fa fa-check"></i><b>2.5</b> Creating a Github Account</a></li>
<li class="chapter" data-level="2.6" data-path="setting-up.html"><a href="setting-up.html#setup-Git"><i class="fa fa-check"></i><b>2.6</b> Setting Up Git</a></li>
<li class="chapter" data-level="2.7" data-path="setting-up.html"><a href="setting-up.html#RStudio-Github"><i class="fa fa-check"></i><b>2.7</b> Connecting RStudio to Git and Github</a><ul>
<li class="chapter" data-level="2.7.1" data-path="setting-up.html"><a href="setting-up.html#say-hello-to-git-on-rstudio"><i class="fa fa-check"></i><b>2.7.1</b> Say hello to git on RStudio</a></li>
<li class="chapter" data-level="2.7.2" data-path="setting-up.html"><a href="setting-up.html#create-a-repository"><i class="fa fa-check"></i><b>2.7.2</b> Create a repository</a></li>
<li class="chapter" data-level="2.7.3" data-path="setting-up.html"><a href="setting-up.html#connect-github-to-rstudio-the-fun-part"><i class="fa fa-check"></i><b>2.7.3</b> Connect Github to RStudio (the fun part)</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="setting-up.html"><a href="setting-up.html#work-git"><i class="fa fa-check"></i><b>2.8</b> Working with Git on RStudio</a><ul>
<li class="chapter" data-level="2.8.1" data-path="setting-up.html"><a href="setting-up.html#how-does-this-all-work"><i class="fa fa-check"></i><b>2.8.1</b> How does this all work?</a></li>
<li class="chapter" data-level="2.8.2" data-path="setting-up.html"><a href="setting-up.html#check-if-things-happened-as-expected"><i class="fa fa-check"></i><b>2.8.2</b> Check if things happened as expected</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>3</b> Workflow</a><ul>
<li class="chapter" data-level="3.1" data-path="workflow.html"><a href="workflow.html#why-create-a-project"><i class="fa fa-check"></i><b>3.1</b> Why create a project?</a></li>
<li class="chapter" data-level="3.2" data-path="workflow.html"><a href="workflow.html#create-proj"><i class="fa fa-check"></i><b>3.2</b> Creating a project in RStudio</a></li>
<li class="chapter" data-level="3.3" data-path="workflow.html"><a href="workflow.html#push-git"><i class="fa fa-check"></i><b>3.3</b> Pushing a R Markdown document to your Github repository</a></li>
<li class="chapter" data-level="3.4" data-path="workflow.html"><a href="workflow.html#write-paper"><i class="fa fa-check"></i><b>3.4</b> Writing a paper in R Markdown</a><ul>
<li class="chapter" data-level="3.4.1" data-path="workflow.html"><a href="workflow.html#prerequisites"><i class="fa fa-check"></i><b>3.4.1</b> Prerequisites</a></li>
<li class="chapter" data-level="3.4.2" data-path="workflow.html"><a href="workflow.html#installing-papaja"><i class="fa fa-check"></i><b>3.4.2</b> Installing papaja</a></li>
<li class="chapter" data-level="3.4.3" data-path="workflow.html"><a href="workflow.html#opening-the-template"><i class="fa fa-check"></i><b>3.4.3</b> Opening the template</a></li>
<li class="chapter" data-level="3.4.4" data-path="workflow.html"><a href="workflow.html#getting-to-know-your-apa-r-markdown-template"><i class="fa fa-check"></i><b>3.4.4</b> Getting to know your APA R Markdown template</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="workflow.html"><a href="workflow.html#lets-talk-about-code-chunks"><i class="fa fa-check"></i><b>3.5</b> Let’s talk about code chunks</a></li>
<li class="chapter" data-level="3.6" data-path="workflow.html"><a href="workflow.html#code-chunks-in-the-papaja-template"><i class="fa fa-check"></i><b>3.6</b> Code chunks in the papaja template</a></li>
<li class="chapter" data-level="3.7" data-path="workflow.html"><a href="workflow.html#body-of-the-papaja-template"><i class="fa fa-check"></i><b>3.7</b> Body of the papaja template</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i><b>4</b> Bibliography</a><ul>
<li class="chapter" data-level="4.1" data-path="bibliography.html"><a href="bibliography.html#download-zotero"><i class="fa fa-check"></i><b>4.1</b> Downloading Zotero</a></li>
<li class="chapter" data-level="4.2" data-path="bibliography.html"><a href="bibliography.html#download-bbt"><i class="fa fa-check"></i><b>4.2</b> Downloading Better Bibtex for Zotero</a></li>
<li class="chapter" data-level="4.3" data-path="bibliography.html"><a href="bibliography.html#load-citr"><i class="fa fa-check"></i><b>4.3</b> Loading the citr package</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="git-branches.html"><a href="git-branches.html"><i class="fa fa-check"></i><b>5</b> Git Branches</a><ul>
<li class="chapter" data-level="5.1" data-path="git-branches.html"><a href="git-branches.html#create-branch"><i class="fa fa-check"></i><b>5.1</b> Creating a branch</a></li>
<li class="chapter" data-level="5.2" data-path="git-branches.html"><a href="git-branches.html#working-in-the-branch"><i class="fa fa-check"></i><b>5.2</b> Working in the branch</a></li>
<li class="chapter" data-level="5.3" data-path="git-branches.html"><a href="git-branches.html#delete-branch"><i class="fa fa-check"></i><b>5.3</b> Deleting the branch</a></li>
<li class="chapter" data-level="5.4" data-path="git-branches.html"><a href="git-branches.html#restore-branch"><i class="fa fa-check"></i><b>5.4</b> Restoring the branch</a></li>
<li class="chapter" data-level="5.5" data-path="git-branches.html"><a href="git-branches.html#use-cmd"><i class="fa fa-check"></i><b>5.5</b> Using Git on the command line</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#loops"><i class="fa fa-check"></i><b>6.1</b> Loops</a><ul>
<li class="chapter" data-level="6.1.1" data-path="functions.html"><a href="functions.html#using-loops-in-a-dataset"><i class="fa fa-check"></i><b>6.1.1</b> Using loops in a dataset</a></li>
<li class="chapter" data-level="6.1.2" data-path="functions.html"><a href="functions.html#vectorizing-the-process"><i class="fa fa-check"></i><b>6.1.2</b> Vectorizing the process</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#applying-lapply"><i class="fa fa-check"></i><b>6.2</b> Applying lapply()</a></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#indexing-your-list"><i class="fa fa-check"></i><b>6.3</b> Indexing your list</a></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#scoped-verbs"><i class="fa fa-check"></i><b>6.4</b> Scoped verbs</a><ul>
<li class="chapter" data-level="6.4.1" data-path="functions.html"><a href="functions.html#using-if"><i class="fa fa-check"></i><b>6.4.1</b> Using if()</a></li>
<li class="chapter" data-level="6.4.2" data-path="functions.html"><a href="functions.html#using-at"><i class="fa fa-check"></i><b>6.4.2</b> Using at()</a></li>
<li class="chapter" data-level="6.4.3" data-path="functions.html"><a href="functions.html#defining-your-own-functions"><i class="fa fa-check"></i><b>6.4.3</b> Defining your own functions</a></li>
<li class="chapter" data-level="6.4.4" data-path="functions.html"><a href="functions.html#applying-more-than-one-function"><i class="fa fa-check"></i><b>6.4.4</b> Applying more than one function</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#nesting"><i class="fa fa-check"></i><b>6.5</b> Nesting data frames</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html"><i class="fa fa-check"></i><b>7</b> Base R vs. Tidyverse</a><ul>
<li class="chapter" data-level="7.1" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#but-first-whats-tidyverse"><i class="fa fa-check"></i><b>7.1</b> But first, what’s Tidyverse?</a></li>
<li class="chapter" data-level="7.2" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#r-basics"><i class="fa fa-check"></i><b>7.2</b> R basics</a><ul>
<li class="chapter" data-level="7.2.1" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#use-r-as-a-calculator"><i class="fa fa-check"></i><b>7.2.1</b> Use R as a calculator</a></li>
<li class="chapter" data-level="7.2.2" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#creating-objects"><i class="fa fa-check"></i><b>7.2.2</b> Creating objects</a></li>
<li class="chapter" data-level="7.2.3" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#creating-vectors"><i class="fa fa-check"></i><b>7.2.3</b> Creating vectors</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#load-data"><i class="fa fa-check"></i><b>7.3</b> Loading data into R</a></li>
<li class="chapter" data-level="7.4" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#comparing-base-r-vs.-tidyverse"><i class="fa fa-check"></i><b>7.4</b> Comparing base R vs. Tidyverse</a><ul>
<li class="chapter" data-level="7.4.1" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#base-r"><i class="fa fa-check"></i><b>7.4.1</b> Base R</a></li>
<li class="chapter" data-level="7.4.2" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#tidy"><i class="fa fa-check"></i><b>7.4.2</b> Tidyverse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>8</b> Data Manipulation</a><ul>
<li class="chapter" data-level="8.1" data-path="data-manipulation.html"><a href="data-manipulation.html#install-packages"><i class="fa fa-check"></i><b>8.1</b> Install packages</a></li>
<li class="chapter" data-level="8.2" data-path="data-manipulation.html"><a href="data-manipulation.html#read-data"><i class="fa fa-check"></i><b>8.2</b> Read data</a></li>
<li class="chapter" data-level="8.3" data-path="data-manipulation.html"><a href="data-manipulation.html#understand-data-frames"><i class="fa fa-check"></i><b>8.3</b> Understand data frames</a><ul>
<li class="chapter" data-level="8.3.1" data-path="data-manipulation.html"><a href="data-manipulation.html#data-frame-exercise"><i class="fa fa-check"></i><b>8.3.1</b> Data frame exercise</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-manipulation.html"><a href="data-manipulation.html#use-tidyverse-for-data-manipulation"><i class="fa fa-check"></i><b>8.4</b> Use tidyverse for data manipulation</a><ul>
<li class="chapter" data-level="8.4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#rename-data-variables"><i class="fa fa-check"></i><b>8.4.1</b> Rename data variables</a></li>
<li class="chapter" data-level="8.4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#create-new-data-variables"><i class="fa fa-check"></i><b>8.4.2</b> Create new data variables</a></li>
<li class="chapter" data-level="8.4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#logical-operators"><i class="fa fa-check"></i><b>8.4.3</b> Logical operators</a></li>
<li class="chapter" data-level="8.4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#same-function-multiple-conditions"><i class="fa fa-check"></i><b>8.4.4</b> Same function, multiple conditions</a></li>
<li class="chapter" data-level="8.4.5" data-path="data-manipulation.html"><a href="data-manipulation.html#select-columns"><i class="fa fa-check"></i><b>8.4.5</b> Select columns</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="data-manipulation.html"><a href="data-manipulation.html#filter-data"><i class="fa fa-check"></i><b>8.5</b> Filter data</a><ul>
<li class="chapter" data-level="8.5.1" data-path="data-manipulation.html"><a href="data-manipulation.html#summarize-data"><i class="fa fa-check"></i><b>8.5.1</b> Summarize data</a></li>
<li class="chapter" data-level="8.5.2" data-path="data-manipulation.html"><a href="data-manipulation.html#sort-data"><i class="fa fa-check"></i><b>8.5.2</b> Sort data</a></li>
<li class="chapter" data-level="8.5.3" data-path="data-manipulation.html"><a href="data-manipulation.html#merge-datasets"><i class="fa fa-check"></i><b>8.5.3</b> Merge datasets</a></li>
<li class="chapter" data-level="8.5.4" data-path="data-manipulation.html"><a href="data-manipulation.html#view-tables"><i class="fa fa-check"></i><b>8.5.4</b> View tables</a></li>
<li class="chapter" data-level="8.5.5" data-path="data-manipulation.html"><a href="data-manipulation.html#group-variables"><i class="fa fa-check"></i><b>8.5.5</b> Group variables</a></li>
<li class="chapter" data-level="8.5.6" data-path="data-manipulation.html"><a href="data-manipulation.html#reshape-data"><i class="fa fa-check"></i><b>8.5.6</b> Reshape data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="graphics.html"><a href="graphics.html"><i class="fa fa-check"></i><b>9</b> Graphics</a><ul>
<li class="chapter" data-level="9.1" data-path="graphics.html"><a href="graphics.html#i-am-going-to-pay-lip-service-to-the-comparativists"><i class="fa fa-check"></i><b>9.1</b> I am going to pay lip service to the comparativists…</a></li>
<li class="chapter" data-level="9.2" data-path="graphics.html"><a href="graphics.html#base-r-graphs"><i class="fa fa-check"></i><b>9.2</b> base R graphs</a><ul>
<li class="chapter" data-level="9.2.1" data-path="graphics.html"><a href="graphics.html#scatter-plots"><i class="fa fa-check"></i><b>9.2.1</b> Scatter plots</a></li>
<li class="chapter" data-level="9.2.2" data-path="graphics.html"><a href="graphics.html#box-plots"><i class="fa fa-check"></i><b>9.2.2</b> Box plots</a></li>
<li class="chapter" data-level="9.2.3" data-path="graphics.html"><a href="graphics.html#bar-plots"><i class="fa fa-check"></i><b>9.2.3</b> Bar plots</a></li>
<li class="chapter" data-level="9.2.4" data-path="graphics.html"><a href="graphics.html#line-plots"><i class="fa fa-check"></i><b>9.2.4</b> Line plots</a></li>
<li class="chapter" data-level="9.2.5" data-path="graphics.html"><a href="graphics.html#histogram-and-density-plots"><i class="fa fa-check"></i><b>9.2.5</b> Histogram and density plots</a></li>
<li class="chapter" data-level="9.2.6" data-path="graphics.html"><a href="graphics.html#pie-charts"><i class="fa fa-check"></i><b>9.2.6</b> Pie charts</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="graphics.html"><a href="graphics.html#world-of-ggplot2"><i class="fa fa-check"></i><b>9.3</b> World of <code>ggplot2</code></a><ul>
<li class="chapter" data-level="9.3.1" data-path="graphics.html"><a href="graphics.html#load-packages"><i class="fa fa-check"></i><b>9.3.1</b> Load packages</a></li>
<li class="chapter" data-level="9.3.2" data-path="graphics.html"><a href="graphics.html#load-dataset"><i class="fa fa-check"></i><b>9.3.2</b> Load dataset</a></li>
<li class="chapter" data-level="9.3.3" data-path="graphics.html"><a href="graphics.html#components"><i class="fa fa-check"></i><b>9.3.3</b> Components</a></li>
<li class="chapter" data-level="9.3.4" data-path="graphics.html"><a href="graphics.html#create-plot"><i class="fa fa-check"></i><b>9.3.4</b> Create plot</a></li>
<li class="chapter" data-level="9.3.5" data-path="graphics.html"><a href="graphics.html#populate-plot"><i class="fa fa-check"></i><b>9.3.5</b> Populate plot</a></li>
<li class="chapter" data-level="9.3.6" data-path="graphics.html"><a href="graphics.html#aesthetics"><i class="fa fa-check"></i><b>9.3.6</b> Aesthetics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>10</b> Analysis</a><ul>
<li class="chapter" data-level="10.1" data-path="graphics.html"><a href="graphics.html#load-packages"><i class="fa fa-check"></i><b>10.1</b> Load packages</a></li>
<li class="chapter" data-level="10.2" data-path="base-r-vs-tidyverse.html"><a href="base-r-vs-tidyverse.html#load-data"><i class="fa fa-check"></i><b>10.2</b> Load data</a></li>
<li class="chapter" data-level="10.3" data-path="analysis.html"><a href="analysis.html#rename-variables"><i class="fa fa-check"></i><b>10.3</b> Rename variables</a></li>
<li class="chapter" data-level="10.4" data-path="analysis.html"><a href="analysis.html#descriptive-analysis"><i class="fa fa-check"></i><b>10.4</b> Descriptive analysis</a><ul>
<li class="chapter" data-level="10.4.1" data-path="analysis.html"><a href="analysis.html#descriptive-graph"><i class="fa fa-check"></i><b>10.4.1</b> Descriptive graph</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="analysis.html"><a href="analysis.html#data-summary"><i class="fa fa-check"></i><b>10.5</b> Data summary</a></li>
<li class="chapter" data-level="10.6" data-path="analysis.html"><a href="analysis.html#regression-analysis"><i class="fa fa-check"></i><b>10.6</b> Regression analysis</a><ul>
<li class="chapter" data-level="10.6.1" data-path="analysis.html"><a href="analysis.html#linear-regression"><i class="fa fa-check"></i><b>10.6.1</b> Linear regression</a></li>
<li class="chapter" data-level="10.6.2" data-path="analysis.html"><a href="analysis.html#diagnostic-plots"><i class="fa fa-check"></i><b>10.6.2</b> Diagnostic plots</a></li>
<li class="chapter" data-level="10.6.3" data-path="analysis.html"><a href="analysis.html#linear-regression-with-standard-errors"><i class="fa fa-check"></i><b>10.6.3</b> Linear regression with standard errors</a></li>
<li class="chapter" data-level="10.6.4" data-path="analysis.html"><a href="analysis.html#logit-regression"><i class="fa fa-check"></i><b>10.6.4</b> Logit regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tools.html"><a href="tools.html"><i class="fa fa-check"></i><b>11</b> Tools</a></li>
<li class="chapter" data-level="12" data-path="replication.html"><a href="replication.html"><i class="fa fa-check"></i><b>12</b> Replication</a></li>
<li class="chapter" data-level="13" data-path="github-pages.html"><a href="github-pages.html"><i class="fa fa-check"></i><b>13</b> GitHub Pages</a><ul>
<li class="chapter" data-level="13.1" data-path="github-pages.html"><a href="github-pages.html#whats-so-great-about-github-pages"><i class="fa fa-check"></i><b>13.1</b> What’s so great about GitHub Pages?</a></li>
<li class="chapter" data-level="13.2" data-path="github-pages.html"><a href="github-pages.html#who-uses-github-pages"><i class="fa fa-check"></i><b>13.2</b> Who uses GitHub Pages?</a></li>
<li class="chapter" data-level="13.3" data-path="github-pages.html"><a href="github-pages.html#steps-to-get-your-github-pages-up-running"><i class="fa fa-check"></i><b>13.3</b> Steps to get your GitHub Pages up &amp; running</a><ul>
<li class="chapter" data-level="13.3.1" data-path="workflow.html"><a href="workflow.html#prerequisites"><i class="fa fa-check"></i><b>13.3.1</b> Prerequisites</a></li>
<li class="chapter" data-level="13.3.2" data-path="github-pages.html"><a href="github-pages.html#step-1-install-hugo"><i class="fa fa-check"></i><b>13.3.2</b> Step 1: Install Hugo</a></li>
<li class="chapter" data-level="13.3.3" data-path="github-pages.html"><a href="github-pages.html#mac-users"><i class="fa fa-check"></i><b>13.3.3</b> Mac Users</a></li>
<li class="chapter" data-level="13.3.4" data-path="github-pages.html"><a href="github-pages.html#step-2-create-site"><i class="fa fa-check"></i><b>13.3.4</b> Step 2: Create site</a></li>
<li class="chapter" data-level="13.3.5" data-path="github-pages.html"><a href="github-pages.html#step-3-add-theme"><i class="fa fa-check"></i><b>13.3.5</b> Step 3: Add theme</a></li>
<li class="chapter" data-level="13.3.6" data-path="github-pages.html"><a href="github-pages.html#step-4-add-content"><i class="fa fa-check"></i><b>13.3.6</b> Step 4: Add content</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="github-pages.html"><a href="github-pages.html#step-5-fire-up-the-hugo-server"><i class="fa fa-check"></i><b>13.4</b> Step 5: Fire up the Hugo server</a><ul>
<li class="chapter" data-level="13.4.1" data-path="github-pages.html"><a href="github-pages.html#step-6-configure-your-site"><i class="fa fa-check"></i><b>13.4.1</b> Step 6: Configure your site</a></li>
<li class="chapter" data-level="13.4.2" data-path="github-pages.html"><a href="github-pages.html#step-7-build-pages"><i class="fa fa-check"></i><b>13.4.2</b> Step 7: Build pages</a></li>
<li class="chapter" data-level="13.4.3" data-path="github-pages.html"><a href="github-pages.html#step-8-create-repositories-on-github"><i class="fa fa-check"></i><b>13.4.3</b> Step 8: Create repositories on GitHub</a></li>
<li class="chapter" data-level="13.4.4" data-path="github-pages.html"><a href="github-pages.html#step-9-pull-git-repository-on-to-your-computer"><i class="fa fa-check"></i><b>13.4.4</b> Step 9: Pull git repository on to your computer</a></li>
<li class="chapter" data-level="13.4.5" data-path="github-pages.html"><a href="github-pages.html#step-10-change-public-facing-location"><i class="fa fa-check"></i><b>13.4.5</b> Step 10: Change public-facing location</a></li>
<li class="chapter" data-level="13.4.6" data-path="github-pages.html"><a href="github-pages.html#step-11-create-public-facing-location"><i class="fa fa-check"></i><b>13.4.6</b> Step 11: Create public-facing location</a></li>
<li class="chapter" data-level="13.4.7" data-path="github-pages.html"><a href="github-pages.html#step-12-execute-changes"><i class="fa fa-check"></i><b>13.4.7</b> Step 12: Execute changes</a></li>
<li class="chapter" data-level="13.4.8" data-path="github-pages.html"><a href="github-pages.html#step-13-check-out-your-site"><i class="fa fa-check"></i><b>13.4.8</b> Step 13: Check out your site</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>14</b> Bookdown</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Statistical Computing in Political Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation" class="section level1">
<h1><span class="header-section-number">8</span> Data Manipulation</h1>
<p>In this lecture, you will learn how to manipulate data. This is probably the most important and unexpectedly time-consuming thing you will do as a social scientist.</p>
<p>Much of this lesson is indebted to my favorite data manipulation page on the internet: <a href="https://mikedecr.github.io/courses/811/811-03-data/">Mike DeCrescenzo’s data manipulation tutorial</a> from his 2018 PS811 course. It is the R tutorial I keep returning to again and again.</p>
<div id="install-packages" class="section level2">
<h2><span class="header-section-number">8.1</span> Install packages</h2>
<pre><code># packages
library(&quot;here&quot;)
library(&quot;haven&quot;)
library(&quot;magrittr&quot;)
library(&quot;tidyverse&quot;)
library(&quot;tidyr&quot;)
library(&quot;dplyr&quot;)</code></pre>
</div>
<div id="read-data" class="section level2">
<h2><span class="header-section-number">8.2</span> Read data</h2>
<p>Here, I am going to introduce you to the <code>here</code> package. To read more about <code>here</code>, I recommend that you check out this <a href="https://github.com/jennybc/here_here">helpful love letter to the <code>here</code> package</a>.</p>
<pre><code># setup folders and directories
here(&quot;_ps811&quot;, &quot;data&quot;)
here(&quot;_ps811&quot;, &quot;code&quot;)

# read stata data in R
scotus &lt;- read_dta(here(&quot;_ps811&quot;, &quot;data&quot;, &quot;SCDB_2020_01_justiceCentered_Citation.dta&quot;))</code></pre>
<p>There are various ways you can check out your data in R.</p>
<pre><code># how does my data LOOK??
scotus
# that was a lot
head(scotus)
# that&#39;s a little better

# bottom six?
tail(scotus)

# i want to see more than six, like eight?
head(scotus, n = 8)
tail(scotus, n = 8)

# you can use the View() command
# this can be slow if it&#39;s a large dataset
View(scotus)

# if the file is, for some reason, NOT a dataframe, you can always force it become a dataframe:

as.data.frame(scotus)

# this doesn&#39;t do anything because it is already a dataframe

# if you are ever struggling with a function, go ahead and do ?function_name
# the help guide should load in the help pane

?as.data.frame</code></pre>
</div>
<div id="understand-data-frames" class="section level2">
<h2><span class="header-section-number">8.3</span> Understand data frames</h2>
<p>You might get tired from referencing both the dataset and the variable every time you want to refer to a variable. I know, typing is exhausting! You might be tempted to use the <code>attach(dataset)</code> function. Don’t use it. It’s not worth the headaches down the road. You will likely use multiple datasets with the same variable names and it is always less confusing for yourself and future reviewers/collaborators if you refer to both the dataset and the variable.</p>
<pre><code># number of rows
nrow(scotus)

# number of columns
ncol(scotus)

# literally my favorite function: names()
# super helpful for other data manipulation tasks
names(scotus)

# you cannot simply reference the variable
justice
# Error: object &#39;justice&#39; not found

# you have to refer to the dataset THEN variable
scotus$justice</code></pre>
<p>I recommend that you download or reference the codebook whenever possible. Sometimes variables are simply a string of numbers and letters (e.g., the ANES dataset has weird codes for their variables that can only be identified by looking them up in the codebook). Thankfully, the SCOTUS database is better than that, but you might still want to clarify a few things so it is easier for you (and your collaborators!) to work with. In any case, the variables are case sensitive so you might want to change the cases.</p>
<p>You can access the <a href="http://scdb.wustl.edu/documentation.php">online codebook for the SCOTUS database</a>. Many codebooks for other datasets may be in PDF or Word format.</p>
<div id="data-frame-exercise" class="section level3">
<h3><span class="header-section-number">8.3.1</span> Data frame exercise</h3>
<p>Creating your own data frame from scratch may help you understand data frames a bit better.</p>
<pre><code># take everything from the streaming service column
streaming &lt;- c(&quot;Netflix&quot;, &quot;Hulu&quot;, &quot;Amazon Prime&quot;) 

# take everything from the approve column
approve &lt;- c(50, 30, 15) 

# take everything from the disapprove column
disapprove &lt;- c(50, 70, 85) 

# create variables from existing variables
difference &lt;- approve-disapprove

# create your dataframe
streaming &lt;- data_frame(streaming, approve, disapprove, difference) 
streaming

# this is a tibble
streaming_df &lt;- as.data.frame(streaming_dataframe)</code></pre>
</div>
</div>
<div id="use-tidyverse-for-data-manipulation" class="section level2">
<h2><span class="header-section-number">8.4</span> Use tidyverse for data manipulation</h2>
<p>You can use base R to manipulate data if you want. You should learn and know base R because many replication materials use base R. But, I gotta tell you, <a href="https://www.tidyverse.org/">tidyverse</a> is the grand suite for manipulating data. Think of it as the Adobe for data manipulation. So, for your own data manipulation endeavors, I’m going to advocate that you use the tidyverse suite of packages.</p>
<p>With <code>tidyverse</code>, you can do the following:</p>
<ul>
<li><code>rename()</code>: rename variables</li>
<li><code>mutate()</code>: create new variables</li>
<li><code>select()</code>: look at specific variable</li>
<li><code>filter()</code>: filter based on conditions</li>
<li><code>summarize()</code>: look at summary statistics</li>
<li><code>group_by()</code>: group by variables</li>
<li><code>arrange()</code>: sort variables by ascending/descending</li>
<li>merge data using <code>join</code> functions
<ul>
<li>more advanced than the base R <code>merge()</code> options</li>
</ul></li>
</ul>
<p>With <code>tidyr</code>, you can do the following:</p>
<ul>
<li><code>gather()</code>: collate column names and turn them into values of a single variable (opposite of <code>spread()</code>)</li>
<li><code>spread()</code>: untangles a variable with multiple repeating values and turns them into their own columns (opposite of <code>gather()</code>)</li>
</ul>
<div id="rename-data-variables" class="section level3">
<h3><span class="header-section-number">8.4.1</span> Rename data variables</h3>
<pre><code># rename(dataset, 
#        new_name = old_name,
#        new_name2 = old_name2)

scotus &lt;- rename(scotus, 
               case.id = caseId,
               docket.id = docketId, 
               case.issues.id = caseIssuesId, 
               vote.id = voteId)</code></pre>
<div id="remember-piping" class="section level4">
<h4><span class="header-section-number">8.4.1.1</span> Remember piping?</h4>
<p>Remember <a href="https://marcyshieh.github.io/ps811/ps811-lecture-6-r-vs-tidy">Lesson 6</a> where we talked about piping? You can also do this using the piping technique.</p>
<pre><code>scotus &lt;- scotus %&gt;%
              rename(case.id = caseId,
               docket.id = docketId, 
               case.issues.id = caseIssuesId, 
               vote.id = voteId)</code></pre>
<p>This can make some of the code run faster. You will be asked to pipe on your homework assignment.</p>
<p>The problem with the <code>rename()</code> function is that it overwrites everything. This means you will no longer have the old variable name around anymore because you have changed it to a new variable name.</p>
<p>But what if you don’t want to overwrite anything?</p>
</div>
</div>
<div id="create-new-data-variables" class="section level3">
<h3><span class="header-section-number">8.4.2</span> Create new data variables</h3>
<p>Instead of overwriting variables, you may simply want to keep your old variables and create new ones.</p>
<pre><code># let&#39;s look at decision directions
table(scotus$decisionDirection)</code></pre>
<p>You will get the following result:</p>
<pre><code>    1     2     3 
38531 40574  1390 </code></pre>
<p>We know from the code book that:
1. conservative
2. liberal
3. unspecifiable</p>
<p>Say you want to create a dummy variable named “liberal” that has all liberal cases coded “1” and all non-liberal cases coded “0”. And, you want to create a dummy variable named “conservative that has all conservative cases coded”1" and all non-conservative cases coded “0”.</p>
<p>In pseudocode-logical speak (I made this up but stay with me), you’re thinking along the lines of the following code:</p>
<pre><code># new_variable &lt;- ifelse(condition, if_true, if_false)
# liberal &lt;- ifelse(decisionDirection == 2, 1, 0)</code></pre>
<p>That’s not exactly it but the logic is certainly there. Let me turn it into real code for you:</p>
<pre><code>scotus &lt;- 
  mutate(scotus, 
         liberal = ifelse(decisionDirection == 2,
                          1,
                          0), 
         conservative = ifelse(decisionDirection == 1,
                               1,
                               0))</code></pre>
<p>Say you want to do create a variable that identifies the decision dates by decade. Here’s your chance to work with date values, which many of you will have to deal with somewhere along the way.</p>
<pre><code># take a look at the variable
summary(scotus$year)

# turn the dateDecision variable into a date variable with the date structure you see in the summary() results
# extract the year and put it in a variable called year
scotus$year &lt;- as.numeric(format(as.Date(scotus$dateDecision, &quot;%Y-%m-%d&quot;), &#39;%Y&#39;))
summary(scotus$year)

# using the year variable, create the decade variable
scotus &lt;- mutate(scotus,
                 decade = ifelse(
                   year %in% 1940:1949, 1940, NA),
                 decade = ifelse(
                   year %in% 1950:1959, 1950, decade),
                 decade = ifelse(
                   year %in% 1960:1969, 1960, decade),
                 decade = ifelse(
                   year %in% 1970:1979, 1970, decade),
                 decade = ifelse(
                   year %in% 1980:1989, 1980, decade),
                 decade = ifelse(
                   year %in% 1990:1999, 1990, decade),
                 decade = ifelse(
                   year %in% 2000:2009, 2000, decade),
                 decade = ifelse(
                   year %in% 2010:2019, 2010, decade),
                 decade = ifelse(
                   year %in% 2020:2029, 2020, decade))

# check out the number of votes per decade
table(scotus$decade)</code></pre>
<p>You may also want to create new variables. Here is an example of creating a new variable that shows the number of years since a particular vote was cast by a justice.</p>
<pre><code>scotus &lt;- mutate(scotus,
                 time_trends = 2020 - year)</code></pre>
</div>
<div id="logical-operators" class="section level3">
<h3><span class="header-section-number">8.4.3</span> Logical operators</h3>
<p>You can access a complete list of logical operators on the <a href="https://www.datamentor.io/r-programming/operator/">Data Mentor page</a>, but I’ve highlighted a few that you will likely encounter.</p>
<ul>
<li><code>&lt;</code>: less than</li>
<li><code>&lt;=</code>: less than or equal to</li>
<li><code>&gt;</code>: greater than</li>
<li><code>&gt;=</code>: greater than or equal to</li>
<li><code>==</code>: exactly equal to</li>
<li><code>!=</code>: not equal to</li>
<li><code>!x</code>: Not x</li>
<li><code>x | y</code>: x OR y</li>
<li><code>x &amp; y</code>: x AND y</li>
<li><code>x %in% c(y, z)</code>: x is equal to y or z</li>
<li><code>isTRUE(x)</code>: test if x is TRUE</li>
<li><code>isFALSE(x)</code>: test if x is false</li>
<li><code>is.na(x)</code>: test if x is NA</li>
<li><code>!is.na(x)</code>: test if x is NOT NA</li>
</ul>
</div>
<div id="same-function-multiple-conditions" class="section level3">
<h3><span class="header-section-number">8.4.4</span> Same function, multiple conditions</h3>
<p>What if we want to check multiple conditions within the same function? You use the <code>case_when()</code> function.</p>
<pre><code>scotus &lt;- mutate(scotus,
               decisionDirection = case_when(
                 decisionDirection == 1 ~ conservative,
                 decisionDirection == 2 ~ liberal,
                 decisionDirection == 3 ~ unspecified))</code></pre>
</div>
<div id="select-columns" class="section level3">
<h3><span class="header-section-number">8.4.5</span> Select columns</h3>
<p>Say your question is whether the decade a case was decided influences whether it is liberal or not, so you might only care about two variables.</p>
<p>You use the <code>select()</code> function. The structure of the <code>select()</code> function is <code>select(dataset, var1, var2)</code>.</p>
<p><code>var1</code>, <code>var2</code>, etc. are the variables you want to select from the <code>dataset</code>. Think of it as grabbing these variables and deleting all the rest.</p>
<pre><code>select(scotus, decade, liberal)</code></pre>
<p>You can also turn it into an object so you can use it later.</p>
<pre><code>scotus_select &lt;- select(scotus, decade, liberal)</code></pre>
<p>Say you only want to select <code>caseId</code> and all background variables (consecutively ordered).</p>
<pre><code>select(scotus, caseId, caseName:lcDispositionDirection)</code></pre>
<p>Say you only want to select <code>caseid</code> and any variable that contains “case” in the name.</p>
<pre><code>select(scotus, caseId, contains(&quot;case&quot;))</code></pre>
<p>Say you want to drop the <code>docketId</code> and keep all other variables.</p>
<pre><code>select(scotus, -docketId)

# more specifically, you can do:
select(scotus, -docketId, matches(&quot;.&quot;))
# matches(&quot;.&quot;) keeps all remaining variables
# though not having also keeps all remaining variables</code></pre>
</div>
</div>
<div id="filter-data" class="section level2">
<h2><span class="header-section-number">8.5</span> Filter data</h2>
<p>You know how you can filter data in Excel? You can do this in R as well. Why would you want to know how to do it in R when you already know how to do it in Excel? Well, if you have a dataset that has hundreds of thousands of observations, it will take forever to load and filter in Excel. It will be way faster if you do it in R.</p>
<p>Say you only want to filter to decisions from before 1990.</p>
<pre><code>filter(scotus, year &lt; 1990)</code></pre>
<p>Say you only want to filter to decisions from 1990.</p>
<pre><code>filter(scotus, year == 1990)</code></pre>
<p>Say you want to filter to decisions from Ruth Bader Ginsburg in 2000</p>
<pre><code>filter(scotus, year == 2000, justiceName == &quot;RBGinsburg&quot;)</code></pre>
<div id="summarize-data" class="section level3">
<h3><span class="header-section-number">8.5.1</span> Summarize data</h3>
<p>Think of this as a more advanced <code>summary()</code> command where you can specify what you want to summarize.</p>
<pre><code># look at the mean of liberal cases (1 being liberal, 0 being non-liberal)
scotus %&gt;%
  summarise(mean = mean(liberal, na.rm = TRUE), n = n())
  
# group by decade, then look at the mean of liberal cases
scotus %&gt;%
  group_by(decade) %&gt;%
  summarise(mean = mean(liberal, na.rm = TRUE), n = n())

# group by decade and look at the quantiles of liberal cases
scotus %&gt;%
  group_by(decade) %&gt;%
  summarise(qs = quantile(liberal, na.rm = TRUE, c(0.25, 0.75)), prob = c(0.25, 0.75))</code></pre>
</div>
<div id="sort-data" class="section level3">
<h3><span class="header-section-number">8.5.2</span> Sort data</h3>
<p>Remember this object we created earlier in the <code>select()</code> section?</p>
<pre><code>scotus_select &lt;- select(scotus, decade, liberal)</code></pre>
<p>Sort decade by ascending order.</p>
<pre><code>arrange(scotus_select, decade, liberal)</code></pre>
<p>Sort decade by descending order.</p>
<pre><code>arrange(scotus_select, desc(decade), liberal)</code></pre>
<div id="identify-what-to-sort" class="section level4">
<h4><span class="header-section-number">8.5.2.1</span> Identify what to sort</h4>
<p>Here’s a mini exercise to help you understand sorting.</p>
<pre><code># there&#39;s an order to this
# arrange(dataset, var1, var2)
# this means you sort by var1, then by var2
# for example

sort_ex_df &lt;- data_frame(x = c(1, 2, 3, 3, 5, 6), 
                y = c(&quot;A&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;B&quot;, &quot;F&quot;))

arrange(sort_ex_df, x, y)
arrange(sort_ex_df, y, x)</code></pre>
</div>
</div>
<div id="merge-datasets" class="section level3">
<h3><span class="header-section-number">8.5.3</span> Merge datasets</h3>
<p>You might have two datasets that you would like to merge.</p>
<p>For some reason, you might obtain grades for a few students from their English and math classes and be asked to create a report card for each student.</p>
<pre><code>english &lt;- data_frame(studentID = c(990055, 889765, 189245, 346789,                                         534098, 132938, 789012), 
                     grade = c(90, 85, 60, 75, 67, 93, 82))

math &lt;- data_frame(studentID = c(990055, 889765, 189245, 346789, 534098,                                  345890), 
                   grade = c(80, 90, 50, 85, 95, 66))
                   </code></pre>
<p>You can do this really quickly in base R without much thought.</p>
<pre><code>merge(english, math, by=&quot;studentID&quot;)
# english grade is &quot;grade.x&quot; and math grade is &quot;grade.y&quot;</code></pre>
<p>The basic <code>merge()</code> function only merge variables that exist in BOTH datasets. If you want to keep all variables in x or y, you can do it in <code>merge()</code> (and it’s only a Google search away!) but it’s WAY easier to remember the functions in the <code>dplyr</code> package.</p>
<pre><code># imitate merge()
inner_join(english, math, by = &quot;studentID&quot;)

# join all, keep all variables, even if NA
full_join(english, math, by=&quot;studentID&quot;)

# keep all students in x
left_join(english, math, by = &quot;studentID&quot;)

# keep all students in y
right_join(english, math, by = &quot;studentID&quot;)

# figure out what doesn&#39;t match
# shows studentID that is in english but not in math
anti_join(english, math, by = &quot;studentID&quot;)

# shows studentID that is in math but not in english
anti_join(math, english, by = &quot;studentID&quot;)</code></pre>
</div>
<div id="view-tables" class="section level3">
<h3><span class="header-section-number">8.5.4</span> View tables</h3>
<p>If you want to just take a look at a variable, the <code>table()</code> function is extremely helpful.</p>
<pre><code># sometimes you just want to see a table of what&#39;s going on with a variable
table(scotus$decade)
table(scotus$liberal)</code></pre>
<p>You can also turn the tables into a proportional table and control the number of decimal points that appear.</p>
<pre><code># turn it into a proportional table
prop.table(table(scotus$decisionDirection))

# round to 2 decimal points
round(prop.table(table(scotus$decisionDirection)), 2)</code></pre>
<p>You can also create a crosstab with two variables.</p>
<pre><code># basic crosstab
table(scotus$decade, scotus$decisionDirection)

# and a prop crosstab
prop.table(table(scotus$decade, scotus$decisionDirection))

# and with rounding!
round(prop.table(table(scotus$decade, scotus$decisionDirection)), 2)</code></pre>
<p>Turn the basic table into an object.</p>
<pre><code>scotus_cross_example &lt;- table(scotus$decade, scotus$decisionDirection)</code></pre>
<p>I am going to demonstrate the <code>margin</code> command.</p>
<p>Say I want to know (liberal decision in 1940s)/(all liberal decisions in every decade). I will want to look at <code>margin = 1</code>, which will add up the number of liberal decisions in the dataset (rows).</p>
<pre><code>scotus_cross_prop_example_row &lt;- prop.table(scotus_cross_example, margin = 1)</code></pre>
<p>Say I want to know (liberal decision in 1940s)/(all decisions in the 1940s). I will want to look at <code>margin = 2</code>, which will add up the number decisions per type (columns).</p>
<pre><code>scotus_cross_prop_example_col &lt;- prop.table(tab, margin = 2)</code></pre>
<p>Say you want to count the number of cases per decade per decision type and you want it in a dataframe.</p>
<pre><code>count(scotus, decade, decisionDirection)</code></pre>
<p>You can turn this data frame into an object!</p>
<pre><code>scotus_count &lt;- count(scotus, decade, decisionDirection)</code></pre>
</div>
<div id="group-variables" class="section level3">
<h3><span class="header-section-number">8.5.5</span> Group variables</h3>
<p>You may want to create descriptive counts per group.</p>
<pre><code># you want to see the proportion of type_of_decision per decade
# so you sum up ALL the decisions per decade
# divide the number of decision types per decade by the number of ALL decisions in decade
# then round them to 3 decimal places
mutate(group_by(scotus_count, decade), 
       n_in_decade = sum(n, na.rm = TRUE),
       p = n / n_in_decade,
       p = round(p, 3))</code></pre>
</div>
<div id="reshape-data" class="section level3">
<h3><span class="header-section-number">8.5.6</span> Reshape data</h3>
<p>I can demonstrate this better if we create a new dataset.</p>
<pre><code>scotus_df_example &lt;- select(scotus, term, issueArea, decisionDirection)</code></pre>
<p>Currently, our decade variable is what you would call a wide dataset because it is horizontally wide.</p>
<pre><code>head(scotus_df_example)
scotus_df_example &lt;- as.data.frame(scotus_df_example)</code></pre>
<p>Let’s use what we’ve learned to wrangle this dataset a bit. We want to select the <code>term</code>, <code>liberal</code>, and <code>conservative</code> variables. We want to filter the terms from 2017 to 2018. Term is different from year because term covers an entire SCOTUS term from October to June (i.e., so when the case was heard), while the year of decision (the <code>year</code> variable that we created earlier) is whenever SCOTUS filed the decision.</p>
<pre><code># select our variables
scotus_df_example &lt;- select(scotus, term, liberal, conservative)

# filter to terms 2017, 2018, 2019
scotus_df_example &lt;- filter(scotus_df_example, term %in% c(2017, 2018, 2019))

# group by term
# create a variable for mean(liberal) and mean(conservative)
scotus_df_example &lt;- summarize(group_by(scotus_df_example, term), 
               liberal = mean(liberal, na.rm = TRUE),
               conservative = mean(conservative, na.rm = TRUE))

scotus_df_example</code></pre>
<p>Say we want to make it into a long dataset. We would use the <code>gather()</code> function.</p>
<p>The <code>key</code> variable allows us to create the variable that we want the values in our individual columns to collate as. This is what we mean…</p>
<pre><code># gather()
scotus_df_example_gather &lt;- gather(scotus_df_example, key = ideology, value = average, liberal, conservative)</code></pre>
<p>The result should look like this. As you can see, the <code>liberal</code> and <code>conservative</code> variables are now values in the <code>ideology</code> variable with their mean scores in the <code>average</code> column.</p>
<pre><code>&gt; scotus_df_example_gather
# A tibble: 6 x 3
   term ideology     average
  &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;
1  2017 liberal        0.44 
2  2018 liberal        0.493
3  2019 liberal        0.5  
4  2017 conservative   0.467
5  2018 conservative   0.466
6  2019 conservative   0.433</code></pre>
<p>We can then turn it back into a wide dataset. We would use the <code>spread()</code> function. This spreads out the data once again into its original setup.</p>
<pre><code>spread(scotus_df_example_gather, key = ideology, value = average) </code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="base-r-vs-tidyverse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="graphics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["ps811-materials.pdf", "ps811-materials.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
